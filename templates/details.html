{% import "generics.html" as generics %}

{% extends 'base.html' %}

{% block content %}
{% if main_type == "movie" %}
{{ generics.movie(data) }}
{% elif main_type == "game" %}
{{ generics.game(data) }}
{% elif main_type == "book" %}
{{ generics.book(data) }}
{% else %}
{{ generics.album(data) }}
{% endif %}

{% if vibes %}
<p>Top vibes:</p>
<ol>
    {% for vibe in vibes %}
    <a href="/{{ main_type }}/{{ id }}/vibe/{{ vibe[0] }}">
        <li>{{ vibe[0] }}: {{ vibe[1] }}</li>
    </a>
    {% endfor %}
</ol>
{% endif %}

<form action="" method="get">
    {{ generics.search_bar("Similar?") }}
</form>
{% if results %}
{% if type == "movie" %}
<ul>
    {% for result in results %}
    <a href="/{{ main_type }}/{{ id }}/connect/movie/{{ result.imdbID }}">
        <li>{{ result.Title }} ({{ result.Year }})</li>
    </a>
    {% endfor %}
</ul>
{% elif type == "game" %}
<ul>
    {% for result in results %}
    <a href="/{{ main_type }}/{{ id }}/connect/game/{{ result.id }}">
        <li>{{ result.name }} ({{ result.released[:4] if result.released else "?" }})</li>
    </a>
    {% endfor %}
</ul>
{% elif type == "book" %}
<ul>
    {% for result in results %}
    <a href="/{{ main_type }}/{{ id }}/connect/book/{{ result.id }}">
        <li>{{ result.volumeInfo.title }} ({% for author in result.volumeInfo.authors %}{{ author }}{{ ", " if not
            loop.last else "" }}{% endfor %}; {{ result.volumeInfo.publishedDate[:4] if
            result.volumeInfo.publishedDate else "?" }})</li>
    </a>
    {% endfor %}
</ul>
{% else %}
<ul>
    {% for result in results %}
    <a href="/{{ main_type }}/{{ id }}/connect/album/{{ result.id }}">
        <li>{{ result.title }}</li>
    </a>
    {% endfor %}
</ul>
{% endif %}
{% endif %}
{% endblock %}